/* ES Module Globals: state, audio, dom, i18n */

// Application state (timer/pomodoro)
export const app = {
  timer: null,
  totalSeconds: 0,
  running: false,
  endTime: 0,
  pomodoroState: { session: "work", cycle: 0 },
  currentLang: localStorage.getItem("lang") || "en",
};

// Audio state
export const audio = {
  audioCtx: new (window.AudioContext || window.webkitAudioContext)(),
  osc: null,
  gain: null,
  mediaMedia: null,
  soundLoopTimer: null,
  soundAutoStopTimer: null,
  activeOscillators: [],
};

// DOM references
export const dom = {
  soundType: document.getElementById("soundType"),
  freq: document.getElementById("freq"),
  volume: document.getElementById("volume"),
  pomodoroCycle: document.getElementById("pomodoroCycle"),
  timeEl: document.getElementById("time"),
  hours: document.getElementById("hours"),
  minutes: document.getElementById("minutes"),
  alertModal: document.getElementById("alertModal"),
  alertOkBtn: document.getElementById("alertOkBtn"),
  modalText: document.getElementById("modalText"),
  customFile: document.getElementById("customFile"),
  playBtn: document.getElementById("playBtn"),
  muteBtn: document.getElementById("muteBtn"),

  pomoWork: document.getElementById("pomoWork"),
  pomoShort: document.getElementById("pomoShort"),
  pomoLong: document.getElementById("pomoLong"),
  pomoCycles: document.getElementById("pomoCycles"),
  pomoOkBtn: document.getElementById("pomoOkBtn"),
  pomodoroModal: document.getElementById("pomodoroModal"),

  langSelect: document.getElementById("langSelect"),
  themeSelect: document.getElementById("themeSelect"),
  autostartToggle: document.getElementById("autostartToggle"),
  settingsBtn: document.getElementById("settingsBtn"),
  settingsModal: document.getElementById("settingsModal"),
  settingsOkBtn: document.getElementById("settingsOkBtn"),

  // Study Schedule DOM Elements
  studyScheduleBtn: document.getElementById("studyScheduleBtn"),
  studyScheduleModal: document.getElementById("studyScheduleModal"),
  studyScheduleClose: document.getElementById("studyScheduleClose"),
  studyScheduleTitle: document.getElementById("studyScheduleTitle"),
  globalTimerDisplay: document.getElementById("globalTimerDisplay"),
  currentSessionInfo: document.getElementById("currentSessionInfo"),
  sessionForm: document.getElementById("sessionForm"),
  sessionDay: document.getElementById("sessionDay"),
  sessionSubject: document.getElementById("sessionSubject"),
  sessionStudyDuration: document.getElementById("sessionStudyDuration"),
  sessionBreakDuration: document.getElementById("sessionBreakDuration"),
  addSessionBtn: document.getElementById("addSessionBtn"),
  sessionsTableBody: document.getElementById("sessionsTableBody"),
  studyAlertModal: document.getElementById("studyAlertModal"),
  studyAlertMessage: document.getElementById("studyAlertMessage"),
  studyAlertOk: document.getElementById("studyAlertOkBtn"),
  studyAlertCancel: document.getElementById("studyAlertCancel"),
};

// Localization texts
export const texts = {
  en: {
    appTitleHeader: "Study Timer",
    timerEmpty: "Set a time first â±ï¸",
    studyFinished: "Finished study!",
    breakFinished: "Finished break!",
    pomodoroFinished: "Finished session!",
    alertFinished: "Time's up!",
    pomodoroTitle: "Pomodoro Settings",
    selectLang: "Select Language",
    modalOk: "OK",
    studyLabel: "Study (min)",
    shortBreakLabel: "Short Break (min)",
    longBreakLabel: "Long Break (min)",
    cyclesLabel: "Cycles",
    soundTypeLabel: "Sound Type",
    freqLabel: "Frequency",
    volumeLabel: "Volume",
    testBtn: "Test Sound",
    stopBtn: "Stop Sound",
    startBtn: "Start",
    stopTimerBtn: "Stop",
    resetBtn: "Reset",
    pomodoroCycleLabel: "Pomodoro Auto Cycle",
    uploadLabel: "Upload Sound / Video",
    hoursPlaceholder: "Hours",
    minutesPlaceholder: "Minutes",
    autostartLabel: "Start with Windows",
    settingsTitle: "Settings",
    langSelectLabel: "Language",
    customOption: "Custom Media",
    bell: "Bell ğŸ””",
    digital: "Digital â°",
    birds: "Birds ğŸ¦",
    piano: "Piano ğŸ¹",
    magic: "Magic âœ¨",
    sineOption: "Sine ã€°ï¸",
    triangleOption: "Triangle ğŸ”º",
    squareOption: "Square â¬›",
    sawtoothOption: "Sawtooth ğŸ“‰",
    autostartError:
      "Failed to update startup settings. Antivirus might be blocking it.",
    themeSelectLabel: "Theme",
    primaryTheme: "Primary Mode ğŸ¨",
    darkTheme: "Dark Mode ğŸŒ‘",
    lightTheme: "Light Mode â˜€ï¸",
    glassyTheme: "Icy Glass ğŸ§Š",
    studyScheduleBtn: "ğŸ“š Study Schedule",
    studyScheduleTitle: "Study Schedule",
    addSession: "Add Session",
    editSession: "Edit Session",
    deleteSession: "Delete",
    startSession: "Start",
    pauseSession: "Pause",
    resumeSession: "Resume",
    resetSession: "Reset",
    dayLabel: "Day",
    subjectLabel: "Subject",
    studyDurationLabel: "Study Duration (min)",
    breakDurationLabel: "Break Duration (min)",
    statusLabel: "Status",
    actionsLabel: "Actions",
    noSessionsMessage: "No sessions yet. Add one above",
    subjectRequired: "Subject name is required",
    durationRequired: "Duration must be greater than 0",
    sessionRunning: "Session is running",
    sessionPaused: "Session is paused",
    sessionCompleted: "Session completed",
    sessionIdle: "Ready to start",
    globalTimerLabel: "Global Timer",
    currentSessionLabel: "Current Session",
    okButton: "OK",
    cancelButton: "Cancel",
    saveButton: "Save",
    closeButton: "Close",
    subjectPlaceholder: "Enter subject name",
    sunday: "Sunday",
    monday: "Monday",
    tuesday: "Tuesday",
    wednesday: "Wednesday",
    thursday: "Thursday",
    friday: "Friday",
    saturday: "Saturday",
  },
  ar: {
    appTitleHeader: "Ù…Ø¤Ù‚Øª Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©",
    timerEmpty: "Ø­Ø¯Ø¯ ÙˆÙ‚Øª Ø§Ù„Ø£ÙˆÙ„ â±ï¸",
    studyFinished: "Ø§Ù†ØªÙ‡Øª Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©!",
    breakFinished: "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø§Ø³ØªØ±Ø§Ø­Ø©!",
    pomodoroFinished: "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©!",
    alertFinished: "Ø®Ù„ØµØª Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© ğŸ‘",
    pomodoroTitle: "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ",
    selectLang: "Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©",
    modalOk: "Ø­Ø³Ù†Ø§Ù‹",
    studyLabel: "Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)",
    shortBreakLabel: "Ø§Ø³ØªØ±Ø§Ø­Ø© Ù‚ØµÙŠØ±Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)",
    longBreakLabel: "Ø§Ø³ØªØ±Ø§Ø­Ø© Ø·ÙˆÙŠÙ„Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)",
    cyclesLabel: "Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª",
    soundTypeLabel: "Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØª",
    freqLabel: "Ø§Ù„ØªØ±Ø¯Ø¯",
    volumeLabel: "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª",
    testBtn: "ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª",
    stopBtn: "Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª",
    startBtn: "Ø§Ø¨Ø¯Ø£",
    stopTimerBtn: "ØªÙˆÙ‚Ù",
    resetBtn: "Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·",
    pomodoroCycleLabel: "Ø¯ÙˆØ±Ø© Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ©",
    uploadLabel: "Ø±ÙØ¹ Ù…Ù„Ù ØµÙˆØª/ÙÙŠØ¯ÙŠÙˆ",
    hoursPlaceholder: "Ø³Ø§Ø¹Ø§Øª",
    minutesPlaceholder: "Ø¯Ù‚Ø§Ø¦Ù‚",
    autostartLabel: "Ø¨Ø¯Ø¡ Ù…Ø¹ ØªØ´ØºÙŠÙ„ ÙˆÙŠÙ†Ø¯ÙˆØ²",
    settingsTitle: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
    langSelectLabel: "Ø§Ù„Ù„ØºØ©",
    customOption: "Ù…Ù„Ù Ù…Ø®ØµØµ",
    bell: "Ø¬Ø±Ø³ ğŸ””",
    digital: "Ø±Ù‚Ù…ÙŠ â°",
    birds: "Ø¹ØµØ§ÙÙŠØ± ğŸ¦",
    piano: "Ø¨ÙŠØ§Ù†Ùˆ ğŸ¹",
    magic: "Ø³Ø­Ø± âœ¨",
    sineOption: "Ù…ÙˆØ¬Ø© Ø¬ÙŠØ¨ÙŠØ© ã€°ï¸",
    triangleOption: "Ù…Ø«Ù„Ø« ğŸ”º",
    squareOption: "Ù…Ø±Ø¨Ø¹ â¬›",
    sawtoothOption: "Ø³Ù† Ø§Ù„Ù…Ù†Ø´Ø§Ø± ğŸ“‰",
    autostartError:
      "ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„. Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙŠÙ…Ù†Ø¹ Ø°Ù„Ùƒ.",
    themeSelectLabel: "Ø§Ù„Ù…Ø¸Ù‡Ø±",
    primaryTheme: "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ğŸ¨",
    darkTheme: "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† ğŸŒ‘",
    lightTheme: "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ â˜€ï¸",
    glassyTheme: "Ø²Ø¬Ø§Ø¬ÙŠ Ø«Ù„Ø¬ÙŠ ğŸ§Š",
    studyScheduleBtn: "ğŸ“š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©",
    studyScheduleTitle: "Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©",
    addSession: "Ø¥Ø¶Ø§ÙØ© Ø¬Ù„Ø³Ø©",
    editSession: "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©",
    deleteSession: "Ø­Ø°Ù",
    startSession: "Ø§Ø¨Ø¯Ø£",
    pauseSession: "Ø£ÙˆÙ‚Ù",
    resumeSession: "Ø§Ø³ØªØ£Ù†Ù",
    resetSession: "Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·",
    dayLabel: "Ø§Ù„ÙŠÙˆÙ…",
    subjectLabel: "Ø§Ù„Ù…Ø§Ø¯Ø©",
    studyDurationLabel: "Ù…Ø¯Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)",
    breakDurationLabel: "Ù…Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ±Ø§Ø­Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)",
    statusLabel: "Ø§Ù„Ø­Ø§Ù„Ø©",
    actionsLabel: "Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
    noSessionsMessage: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø§Øª Ø¨Ø¹Ø¯. Ø£Ø¶Ù ÙˆØ§Ø­Ø¯Ø© Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰",
    subjectRequired: "Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© Ù…Ø·Ù„ÙˆØ¨",
    durationRequired: "Ø§Ù„Ù…Ø¯Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† 0",
    sessionRunning: "Ø§Ù„Ø¬Ù„Ø³Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„",
    sessionPaused: "Ø§Ù„Ø¬Ù„Ø³Ø© Ù…ÙˆÙ‚ÙØ©",
    sessionCompleted: "Ø§Ù„Ø¬Ù„Ø³Ø© Ù…ÙƒØªÙ…Ù„Ø©",
    sessionIdle: "Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡",
    globalTimerLabel: "Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø¹Ø§Ù…",
    currentSessionLabel: "Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©",
    okButton: "Ø­Ø³Ù†Ø§Ù‹",
    cancelButton: "Ø¥Ù„ØºØ§Ø¡",
    saveButton: "Ø­ÙØ¸",
    closeButton: "Ø¥ØºÙ„Ø§Ù‚",
    subjectPlaceholder: "Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©",
    sunday: "Ø§Ù„Ø£Ø­Ø¯",
    monday: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†",
    tuesday: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡",
    wednesday: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",
    thursday: "Ø§Ù„Ø®Ù…ÙŠØ³",
    friday: "Ø§Ù„Ø¬Ù…Ø¹Ø©",
    saturday: "Ø§Ù„Ø³Ø¨Øª",
  },
};

export function setCurrentLang(lang) {
  app.currentLang = lang;
  localStorage.setItem("lang", lang);
}
